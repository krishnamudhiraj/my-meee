{"version":3,"file":"8.20da0b835be559d9694f.hot-update.js","sources":["webpack:///pages/UserDetails/index.js","webpack:///redux/reducers/getStarted/actions.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { get } from 'lodash';\nimport { Image } from 'react-bootstrap';\nimport Select from 'react-select';\nimport Loader from '../../components/Loader';\nimport { onUpdatingDeatils } from '../../redux/reducers/getStarted/actions';\nimport '../../styles/userDetails.scss';\nimport withAuth from '../../utils/functions/withAuth';\n\nconst optionYear = [\n  { value: 'year_1', label: 'Year 1' },\n  { value: 'year_2', label: 'Year 2' },\n  { value: 'year_3', label: 'Year 3' },\n  { value: 'year_4', label: 'Year 4' },\n  { value: 'year_5', label: 'Year 5' },\n  { value: 'year_6', label: 'Year 6' },\n  { value: 'year_7', label: 'Year 7' },\n  { value: 'year_8', label: 'Year 8' },\n  { value: 'year_9', label: 'Year 9' },\n  { value: 'year_10', label: 'Year 10' },\n  { value: 'year_11', label: 'Year 11' },\n  { value: 'year_12', label: 'Year 12' }\n];\nconst optionGender = [\n  { value: 'male', label: 'Male' },\n  { value: 'female', label: 'Female' },\n  { value: 'other', label: 'Other' },\n  { value: 'not_to_say', label: 'Prefer not to say' },\n];\nconst optionType = [\n  { value: 'teacher', label: 'Teacher' },\n  { value: 'pupil', label: 'Pupil' },\n  { value: 'member_of_staff', label: 'Member of staff' },\n];\n\nclass UserDetails extends Component {\n  constructor() {\n    super();\n    this.state = {\n      selectedYear: null,\n      selectedGender: null,\n      selectedType: null\n    };\n    this.updateUserDetails = this.updateUserDetails.bind(this);\n  }\n\n  handleChange = (type, value) => {\n    if (type === 'selectedYear') this.setState({ selectedYear: value });\n    if (type === 'selectedGender') this.setState({ selectedGender: value });\n    if (type === 'selectedType') this.setState({ selectedType: value });\n  };\n\n  updateUserDetails = () => {\n    const { onUpdatingDeatils } = this.props;\n    const { selectedYear, selectedGender, selectedType } = this.state;\n    onUpdatingDeatils({\n      year: selectedYear.label,\n      gender: selectedGender.label,\n      member_type: selectedType.label\n    }).then(() => {\n      Router.push('/WhatAreValues');\n    });\n  }\n\n  render() {\n    const { isLoading } = this.props;\n    const { selectedYear, selectedGender, selectedType } = this.state;\n\n    return (\n      <div className=\"user-deatils\">\n        {isLoading && <Loader />}\n        <div className=\"user-deatils-content\">\n          <Image\n            className=\"meee-image\"\n            src={require('../../utils/assets/meeLogo2.png')}\n            responsive\n          />\n          <form>\n            <div className=\"input-view\">\n              <div className=\"input-view-in\">\n                <p className=\"question\">Which year are you in?</p>\n                <div className=\"dropdown-theme\">\n                  <Select\n                    value={selectedYear}\n                    placeholder={'I am in...'}\n                    onChange={value => this.handleChange('selectedYear', value)}\n                    options={optionYear}\n                  />\n                </div>\n              </div>\n\n              {selectedYear !== null && (\n                <div className=\"input-view-in\">\n                  <p className=\"question\">\n                    What\n                    {'\\''}s your gender?\n                  </p>\n                  <div className=\"dropdown-theme\">\n                    <Select\n                      value={selectedGender}\n                      placeholder={'Select from list'}\n                      onChange={value =>\n                        this.handleChange('selectedGender', value)\n                      }\n                      options={optionGender}\n                    />\n                  </div>\n                </div>\n              )}\n\n              {selectedYear !== null &&\n                selectedGender !== null && (\n                <div className=\"input-view-in\">\n                  <p className=\"question\">\n                      Are you a pupil, teacher, or member of staff?\n                  </p>\n                  <div className=\"dropdown-theme\">\n                    <Select\n                      value={selectedType}\n                      placeholder={'Select from list'}\n                      onChange={value =>\n                        this.handleChange('selectedType', value)\n                      }\n                      options={optionType}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </form>\n\n          {selectedYear !== null &&\n            selectedGender !== null &&\n            selectedType !== null && (\n            <button className=\"next-button\" onClick={this.updateUserDetails}>\n              <div className=\"btn-up-body\">\n                <p>All done!</p>\n                <Image\n                  className=\"next-arrow\"\n                  src={require('../../utils/assets/rightArrow.png')}\n                  responsive\n                />\n              </div>\n              <p className=\"btm-text\">Start using the app</p>\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  dispatch,\n  onUpdatingDeatils: code => dispatch(onUpdatingDeatils(code)),\n});\n\nconst mapStateToProps = ({ getStarted }) => ({\n  isLoading: get(getStarted, 'isLoading'),\n});\n\nexport default withAuth(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(UserDetails)\n);\n\n\n\n// WEBPACK FOOTER //\n// pages/UserDetails/index.js","import { ON_SIGNUP_REQUESTED, ON_SIGNUP_COMPLETED, ON_SIGNUP_FAILED, ON_UPDATE_USER_REQUESTED, ON_UPDATE_USER_COMPLETED } from './types';\nimport { searchCode, updateCodeUsed, searchSchoolCode } from '../../../services/code';\nimport { updateUserData } from '../../../services/schools';\nimport { fetchUser } from '../../../services/users';\n\nexport const onSignupRequested = (code) => async (dispatch, getState) => {\n  // const {} = getState();\n  dispatch({ type: ON_SIGNUP_REQUESTED });\n\n  const codeData = await searchCode(Number(code));\n\n  if (codeData.response === false) {\n    dispatch({ type: ON_SIGNUP_FAILED, status: codeData.message });\n    return false;\n  } else {\n    const fetchUserData = await fetchUser(codeData.data.customer_id);\n    const { name, email } = fetchUserData.data;\n\n    await updateCodeUsed(codeData.id, code);\n    dispatch({ type: ON_SIGNUP_COMPLETED, status: 'success', name, email });\n    return true;\n  }\n};\n\nexport const onSchoolSignupRequested = (code) => async (dispatch, getState) => {\n  // const {} = getState();\n\n  dispatch({ type: ON_SIGNUP_REQUESTED });\n\n  const { response, message, id, data } = await searchSchoolCode(Number(code));\n  if (response) {\n    dispatch({\n      type: ON_SIGNUP_COMPLETED,\n      status: message,\n      schoolName: data.school_name,\n      schoolKey: id\n    });\n  } else {\n    dispatch({ type: ON_SIGNUP_FAILED, status: message });\n  }\n};\n\nexport const onUpdatingDeatils = (userData) => async (dispatch, getState) => {\n  // const {} = getState();\n\n  const { schoolUserKey } = getState().code;\n\n  dispatch({ type: ON_UPDATE_USER_REQUESTED });\n\n  const codeData = await updateUserData(schoolUserKey, userData);\n\n  if (codeData.response === false) {\n    dispatch({ type: ON_UPDATE_USER_COMPLETED, status: 'Failed to update user Data.' });\n  } else {\n    dispatch({ type: ON_UPDATE_USER_COMPLETED, status: 'success' });\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// redux/reducers/getStarted/actions.js"],"mappings":"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","sourceRoot":""}